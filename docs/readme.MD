# Lightweight PHP MVC Framework (Custom Laravel-style)

This is a lightweight PHP MVC project with a simple CLI for generating files and managing database tables (migrations).

---

## ğŸ“ Directory Structure

```
framework/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ views/
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ cli.php
â”œâ”€â”€ config/
â”‚   â””â”€â”€ database.php
â”œâ”€â”€ core/
â”‚   â””â”€â”€ Database.php
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ migrate.php
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ readme.MD
â”‚   â””â”€â”€ docs.txt
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ auth_debug.log
â”‚   â””â”€â”€ admin_debug.log
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.php
â”‚   â””â”€â”€ router.php
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ admin/
â”‚       â”œâ”€â”€ create_admin.php
â”‚       â”œâ”€â”€ fix_admin.php
â”‚       â””â”€â”€ check_admin.php
â””â”€â”€ vendor/
```

---

## âš™ï¸ Requirements

- PHP 7.x or later
- MySQL/MariaDB
- CLI Access (e.g., Command Prompt, Terminal)

---

## ğŸ‘¨â€ğŸ› ï¸ How to Use

### 1. ğŸ“¦ Create Files (Controller, Model, View)

Use the CLI tool to generate files automatically:

```bash
# Generate a controller
php bin/cli.php make:controller UserController

# Generate a model
php bin/cli.php make:model User

# Generate a view
php bin/cli.php make:view user_view
```

Generated files will go into their respective folders:
- Controllers â†’ `app/controller/`
- Models â†’ `app/models/`
- Views â†’ `app/views/`

---

### 2. ğŸ§± Create a Migration File (for Table Creation)

Manually create a migration file inside the `/database/migrations/` folder.

Example file: `database/migrations/2025_04_04_184533_create_faculty_table.php`

```php
<?php

class CreateFacultyTable {
    public function up($pdo) {
        $query = "
            CREATE TABLE IF NOT EXISTS faculty (
                id INT AUTO_INCREMENT PRIMARY KEY,
                name VARCHAR(100),
                email VARCHAR(100),
                department VARCHAR(100),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            );
        ";
        $pdo->exec($query);
    }
}
```

ğŸ“ **Important**: 
- Class names must NOT start with numbers
- Migration files should be named with timestamp prefix (YYYY_MM_DD_HHMMSS)
- Each migration should have a unique name

---

### 3. ğŸš€ Run Migrations (Push Tables to DB)

Use the migration runner to push your defined tables to the database:

```bash
php database/migrate.php
```

Each migration file will:
- Be loaded
- The class will be instantiated
- The `up()` method will be called to create your table

You will see success messages in your terminal.

---

### 4. ğŸ‘¤ Admin Management

The framework includes several admin management scripts:

```bash
# Create a new admin user
php scripts/admin/create_admin.php

# Fix admin user issues
php scripts/admin/fix_admin.php

# Check admin user status
php scripts/admin/check_admin.php
```

---

## âœ… Example Workflow

```bash
# Step 1: Generate controller, model, and view
php bin/cli.php make:controller FacultyController
php bin/cli.php make:model Faculty
php bin/cli.php make:view faculty

# Step 2: Create migration file
# (create manually: database/migrations/2025_04_04_184533_create_faculty_table.php)

# Step 3: Run migrations
php database/migrate.php

# Step 4: Create admin user (if needed)
php scripts/admin/create_admin.php
```

---

## ğŸ”§ Config

Edit `config/database.php` to update your DB connection:

```php
class Database {
    public static function connect() {
        return new PDO('mysql:host=localhost;dbname=your_db_name', 'root', '');
    }
}
```

---

## ğŸ’¡ Tips

- Keep migration filenames unique using timestamps (e.g. `2025_04_04_184533_create_users_table.php`)
- Check the logs directory for debugging information
- Use the admin scripts for user management
- The CLI tool can be extended to support more commands

---

## ğŸ“Œ License

This is a custom educational framework inspired by Laravel. Not for production use.

